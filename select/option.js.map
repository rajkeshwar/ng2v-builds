{"version":3,"file":"option.js","sourceRoot":"","sources":["../../../src/lib/select/option.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  Output,\r\n  NgModule,\r\n  ModuleWithProviders,\r\n  Renderer,\r\n  ViewEncapsulation,\r\n} from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ENTER, SPACE } from '../core/keyboard/keycodes';\r\nimport { coerceBooleanProperty } from '../core/coercion/boolean-property';\r\nimport { MdSelectionModule } from '../core/selection/index';\r\n\r\n/**\r\n * Option IDs need to be unique across components, so this counter exists outside of\r\n * the component definition.\r\n */\r\nlet _uniqueIdCounter = 0;\r\n\r\n/** Event object emitted by MdOption when selected or deselected. */\r\nexport class Md2OptionSelectionChange {\r\n  constructor(public source: Md2Option, public isUserInput = false) { }\r\n}\r\n\r\n\r\n/**\r\n * Single option inside of a `<md2-select>` element.\r\n */\r\n@Component({\r\n  moduleId: module.id,\r\n  selector: 'md2-option',\r\n  host: {\r\n    'role': 'option',\r\n    '[attr.tabindex]': '_getTabIndex()',\r\n    '[class.md2-selected]': 'selected',\r\n    '[class.md2-option-multiple]': 'multiple',\r\n    '[class.md2-active]': 'active',\r\n    '[id]': 'id',\r\n    '[attr.aria-selected]': 'selected.toString()',\r\n    '[attr.aria-disabled]': 'disabled.toString()',\r\n    '[class.md2-option-disabled]': 'disabled',\r\n    '(click)': '_selectViaInteraction()',\r\n    '(keydown)': '_handleKeydown($event)',\r\n    '[class.md2-option]': 'true',\r\n  },\r\n  template: '<ng-content></ng-content>',\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class Md2Option {\r\n  private _selected: boolean = false;\r\n  private _active: boolean = false;\r\n\r\n  /** Whether the option is disabled.  */\r\n  private _disabled: boolean = false;\r\n\r\n  private _id: string = `md2-option-${_uniqueIdCounter++}`;\r\n\r\n  /** Whether the wrapping component is in multiple selection mode. */\r\n  multiple: boolean = false;\r\n\r\n  /** The unique ID of the option. */\r\n  get id() { return this._id; }\r\n\r\n  /** Whether or not the option is currently selected. */\r\n  get selected(): boolean { return this._selected; }\r\n\r\n  /** The form value of the option. */\r\n  @Input() value: any;\r\n\r\n  /** Whether the option is disabled. */\r\n  @Input()\r\n  get disabled() { return this._disabled; }\r\n  set disabled(value: any) { this._disabled = coerceBooleanProperty(value); }\r\n\r\n  /** Event emitted when the option is selected or deselected. */\r\n  @Output() onSelectionChange = new EventEmitter<Md2OptionSelectionChange>();\r\n\r\n  constructor(\r\n    private _element: ElementRef,\r\n    private _renderer: Renderer) { }\r\n\r\n  /**\r\n   * Whether or not the option is currently active and ready to be selected.\r\n   * An active option displays styles as if it is focused, but the\r\n   * focus is actually retained somewhere else. This comes in handy\r\n   * for components like autocomplete where focus must remain on the input.\r\n   */\r\n  get active(): boolean {\r\n    return this._active;\r\n  }\r\n\r\n  /**\r\n   * The displayed value of the option. It is necessary to show the selected option in the\r\n   * select's trigger.\r\n   */\r\n  get viewValue(): string {\r\n    return this._getHostElement().textContent.trim();\r\n  }\r\n\r\n  /** Selects the option. */\r\n  select(): void {\r\n    this._selected = true;\r\n    this._emitSelectionChangeEvent();\r\n  }\r\n\r\n  /** Deselects the option. */\r\n  deselect(): void {\r\n    this._selected = false;\r\n    this._emitSelectionChangeEvent();\r\n  }\r\n\r\n  /** Sets focus onto this option. */\r\n  focus(): void {\r\n    this._renderer.invokeElementMethod(this._getHostElement(), 'focus');\r\n  }\r\n\r\n  /**\r\n   * This method sets display styles on the option to make it appear\r\n   * active. This is used by the ActiveDescendantKeyManager so key\r\n   * events will display the proper options as active on arrow key events.\r\n   */\r\n  setActiveStyles(): void {\r\n    this._active = true;\r\n  }\r\n\r\n  /**\r\n   * This method removes display styles on the option that made it appear\r\n   * active. This is used by the ActiveDescendantKeyManager so key\r\n   * events will display the proper options as active on arrow key events.\r\n   */\r\n  setInactiveStyles(): void {\r\n    this._active = false;\r\n  }\r\n\r\n  /** Ensures the option is selected when activated from the keyboard. */\r\n  _handleKeydown(event: KeyboardEvent): void {\r\n    if (event.keyCode === ENTER || event.keyCode === SPACE) {\r\n      this._selectViaInteraction();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Selects the option while indicating the selection came from the user. Used to\r\n   * determine if the select's view -> model callback should be invoked.\r\n   */\r\n  _selectViaInteraction(): void {\r\n    if (!this.disabled) {\r\n      this._selected = this.multiple ? !this._selected : true;\r\n      this._emitSelectionChangeEvent(true);\r\n    }\r\n  }\r\n\r\n  /** Returns the correct tabindex for the option depending on disabled state. */\r\n  _getTabIndex(): string {\r\n    return this.disabled ? '-1' : '0';\r\n  }\r\n\r\n  /** Fetches the host DOM element. */\r\n  _getHostElement(): HTMLElement {\r\n    return this._element.nativeElement;\r\n  }\r\n\r\n  /** Emits the selection change event. */\r\n  private _emitSelectionChangeEvent(isUserInput = false): void {\r\n    this.onSelectionChange.emit(new Md2OptionSelectionChange(this, isUserInput));\r\n  };\r\n\r\n}\r\n\r\n@NgModule({\r\n  imports: [CommonModule, MdSelectionModule],\r\n  exports: [Md2Option],\r\n  declarations: [Md2Option]\r\n})\r\nexport class Md2OptionModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: Md2OptionModule,\r\n      providers: []\r\n    };\r\n  }\r\n}\r\n"]}