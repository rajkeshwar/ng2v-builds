{"version":3,"file":"data-table.js","sourceRoot":"","sources":["../../../src/lib/data-table/data-table.ts"],"names":[],"mappings":"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","sourcesContent":["import {\r\n  Component,\r\n  Directive,\r\n  EventEmitter,\r\n  Input,\r\n  Output,\r\n  OnInit,\r\n  Optional,\r\n  DoCheck,\r\n  IterableDiffers,\r\n  IterableDiffer,\r\n  ViewEncapsulation,\r\n  NgModule,\r\n  ModuleWithProviders,\r\n} from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Md2SelectModule } from '../select/index';\r\n\r\nexport class Md2PaginationChange {\r\n  source: Md2Pagination;\r\n  activePage: number;\r\n}\r\n\r\nexport interface SortEvent {\r\n  sortBy: string | string[];\r\n  sortOrder: string;\r\n}\r\n\r\nexport interface PageEvent {\r\n  activePage: number;\r\n  rowsPerPage: number;\r\n  dataLength: number;\r\n}\r\n\r\nexport interface DataEvent {\r\n  length: number;\r\n}\r\n\r\n@Directive({\r\n  selector: 'table[md2Data]',\r\n  exportAs: 'md2DataTable'\r\n})\r\nexport class Md2DataTable implements DoCheck {\r\n\r\n  private diff: IterableDiffer<any>;\r\n  private isDataChanged = false;\r\n  private _data: Array<any> = [];\r\n  private _activePage: number = 1;\r\n  private _rowsPerPage: number = 1000;\r\n  private _sortBy: string | Array<string> = '';\r\n  private _sortOrder: string = 'asc';\r\n\r\n  data: Array<any>;\r\n\r\n  @Input()\r\n  get md2Data() { return this._data; }\r\n  set md2Data(value: Array<any>) {\r\n    if (this._data !== value) {\r\n      this._data = value || [];\r\n      this.recalculatePage();\r\n      this.isDataChanged = true;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  get activePage() { return this._activePage; }\r\n  set activePage(value: number) {\r\n    if (this._activePage !== value) {\r\n      this._activePage = value;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  get rowsPerPage() { return this._rowsPerPage; }\r\n  set rowsPerPage(value: number) {\r\n    if (this._rowsPerPage !== value) {\r\n      this._rowsPerPage = value;\r\n      this.setPage(this.activePage, value);\r\n      this.isDataChanged = true;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  get sortBy() { return this._sortBy; }\r\n  set sortBy(value: string | Array<string>) {\r\n    if (this._sortBy !== value) {\r\n      this._sortBy = value;\r\n      if (value) {\r\n        this.onSortChange.next({ sortBy: this.sortBy, sortOrder: this.sortOrder });\r\n      }\r\n      this.isDataChanged = true;\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  get sortOrder() { return this._sortOrder; }\r\n  set sortOrder(value: string) {\r\n    if (!(value === 'asc' || value === 'desc')) {\r\n      console.warn('sortOrder value must be one of [\"asc\", \"desc\"], but is:', value);\r\n      value = 'asc';\r\n    }\r\n    if (this._sortOrder !== value) {\r\n      this._sortOrder = value;\r\n      this.isDataChanged = true;\r\n    }\r\n  }\r\n\r\n  @Output() activePageChange = new EventEmitter<number>();\r\n  @Output() sortByChange = new EventEmitter<string | string[]>();\r\n  @Output() sortOrderChange = new EventEmitter<string>();\r\n\r\n  onSortChange = new EventEmitter<SortEvent>();\r\n  onPageChange = new EventEmitter<PageEvent>();\r\n\r\n  constructor(private differs: IterableDiffers) {\r\n    this.diff = differs.find([]).create(null);\r\n  }\r\n\r\n  ngDoCheck(): any {\r\n    let changes = this.diff.diff(this.md2Data);\r\n    if (changes) {\r\n      this.recalculatePage();\r\n      this.isDataChanged = true;\r\n    }\r\n    if (this.isDataChanged) {\r\n      this.fillData();\r\n      this.diff.diff(this.md2Data);\r\n      this.isDataChanged = false;\r\n    }\r\n  }\r\n\r\n  getSort(): SortEvent {\r\n    return { sortBy: this.sortBy, sortOrder: this.sortOrder };\r\n  }\r\n\r\n  setSort(sortBy: string | string[], sortOrder: string) {\r\n    if (this.sortBy !== sortBy || this.sortOrder !== sortOrder) {\r\n      this.sortBy = sortBy;\r\n      this.sortOrder = sortOrder;\r\n      this.isDataChanged = true;\r\n      this.onSortChange.next({ sortBy: sortBy, sortOrder: sortOrder });\r\n      this.sortByChange.emit(this.sortBy);\r\n      this.sortOrderChange.emit(this.sortOrder);\r\n    }\r\n  }\r\n\r\n  getPage(): PageEvent {\r\n    return {\r\n      activePage: this.activePage,\r\n      rowsPerPage: this.rowsPerPage,\r\n      dataLength: this.md2Data.length\r\n    };\r\n  }\r\n\r\n  setPage(activePage: number, rowsPerPage: number): void {\r\n    if (this.rowsPerPage !== rowsPerPage || this.activePage !== activePage) {\r\n      this.activePage = this.activePage !== activePage ?\r\n        activePage : this.calculateNewActivePage(this.rowsPerPage, rowsPerPage);\r\n      this.rowsPerPage = rowsPerPage;\r\n      this.isDataChanged = true;\r\n      this.onPageChange.emit({\r\n        activePage: this.activePage,\r\n        rowsPerPage: this.rowsPerPage,\r\n        dataLength: this.md2Data ? this.md2Data.length : 0\r\n      });\r\n      this.activePageChange.emit(this.activePage);\r\n    }\r\n  }\r\n\r\n  private calculateNewActivePage(previousRowsPerPage: number, currentRowsPerPage: number): number {\r\n    let firstRowOnPage = (this.activePage - 1) * previousRowsPerPage + 1;\r\n    let newActivePage = Math.ceil(firstRowOnPage / currentRowsPerPage);\r\n    return newActivePage;\r\n  }\r\n\r\n  private recalculatePage() {\r\n    let lastPage = Math.ceil(this.md2Data.length / this.rowsPerPage);\r\n    if (lastPage < this.activePage) {\r\n      this._activePage = lastPage || 1;\r\n      setTimeout(() => {\r\n        this.activePageChange.emit(this.activePage);\r\n      }, 10);\r\n    } else { }\r\n\r\n    this.onPageChange.emit({\r\n      activePage: this.activePage,\r\n      rowsPerPage: this.rowsPerPage,\r\n      dataLength: this.md2Data.length\r\n    });\r\n  }\r\n\r\n  private fillData() {\r\n    let offset = (this.activePage - 1) * this.rowsPerPage;\r\n    let data = this.md2Data;\r\n    let sortInt = this.sortOrder === 'desc' ? -1 : 1;\r\n    if (this.sortBy) {\r\n      data = data.sort((a: any, b: any) => {\r\n        let x = this.caseInsensitiveIteratee(a);\r\n        let y = this.caseInsensitiveIteratee(b);\r\n        return ((x > y) ? 1 : (y > x) ? -1 : 0) * sortInt;\r\n      });\r\n    }\r\n    this.data = data.slice(offset, offset + this.rowsPerPage);\r\n  }\r\n\r\n  private caseInsensitiveIteratee(value: any) {\r\n    if (typeof this.sortBy === 'string' || this.sortBy instanceof String) {\r\n      for (let sortByProperty of this.sortBy.split('.')) {\r\n        value = value[sortByProperty];\r\n      }\r\n    } else {\r\n      value = value[this.sortBy + ''];\r\n    }\r\n    if (value && typeof value === 'string' || value instanceof String) {\r\n      return value.toLowerCase();\r\n    }\r\n    return value;\r\n  }\r\n\r\n}\r\n\r\n@Component({\r\n  selector: '[md2SortBy]',\r\n  templateUrl: 'sort.html',\r\n  styleUrls: ['data-table.scss'],\r\n  host: {\r\n    '[class.md2-sort-active]': '_isAsc || _isDesc',\r\n    '(click)': '_sort()'\r\n  },\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class Md2DataTableSortBy implements OnInit {\r\n\r\n  @Input() md2SortBy: string;\r\n\r\n  _isAsc: boolean = false;\r\n  _isDesc: boolean = false;\r\n\r\n  constructor(private _md2Table: Md2DataTable) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this._md2Table.onSortChange.subscribe((event: SortEvent) => {\r\n      this._isAsc = (event.sortBy === this.md2SortBy && event.sortOrder === 'asc');\r\n      this._isDesc = (event.sortBy === this.md2SortBy && event.sortOrder === 'desc');\r\n    });\r\n  }\r\n\r\n  _sort() {\r\n    if (this._isAsc) {\r\n      this._md2Table.setSort(this.md2SortBy, 'desc');\r\n    } else {\r\n      this._md2Table.setSort(this.md2SortBy, 'asc');\r\n    }\r\n  }\r\n\r\n}\r\n\r\n@Component({\r\n  selector: 'md2-pagination',\r\n  templateUrl: 'pagination.html',\r\n  styleUrls: ['data-table.css'],\r\n  exportAs: 'md2Pagination',\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class Md2Pagination {\r\n\r\n  private _activePage: number = 1;\r\n\r\n  @Input() rowsPerPageSet: any = [];\r\n  @Input() md2Table: Md2DataTable;\r\n\r\n  _rowsPerPage: number;\r\n  _dataLength: number = 0;\r\n  _lastPage: number;\r\n\r\n  constructor( @Optional() private _dataTable: Md2DataTable) { }\r\n\r\n  ngDoCheck() {\r\n    this.md2Table = this.md2Table || this._dataTable;\r\n    this.onPageChangeSubscriber(this.md2Table.getPage());\r\n    this.md2Table.onPageChange.subscribe(this.onPageChangeSubscriber);\r\n  }\r\n\r\n  _setPage(pageNumber: number): void {\r\n    this.md2Table.setPage(pageNumber, this._rowsPerPage);\r\n  }\r\n\r\n  _setRows(event: any): void {\r\n    this.md2Table.setPage(this._activePage, parseInt(event.value));\r\n  }\r\n\r\n  private onPageChangeSubscriber = (event: PageEvent) => {\r\n    this._activePage = event.activePage;\r\n    this._rowsPerPage = event.rowsPerPage;\r\n    this._dataLength = event.dataLength;\r\n    this._lastPage = Math.ceil(this._dataLength / this._rowsPerPage);\r\n  }\r\n\r\n}\r\n\r\nexport const MD2_DATA_TABLE_DIRECTIVES: any[] = [\r\n  Md2DataTable,\r\n  Md2DataTableSortBy,\r\n  Md2Pagination\r\n];\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, Md2SelectModule.forRoot()],\r\n  exports: MD2_DATA_TABLE_DIRECTIVES,\r\n  declarations: MD2_DATA_TABLE_DIRECTIVES,\r\n})\r\nexport class Md2DataTableModule {\r\n  static forRoot(): ModuleWithProviders {\r\n    return {\r\n      ngModule: Md2DataTableModule\r\n    };\r\n  }\r\n}\r\n"]}